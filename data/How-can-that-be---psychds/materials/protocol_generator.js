"function generateProtocol(child, pastSessions) {\r\n    const STIMDIR = \"https://cocodev.opalstacked.com/experiments/junyi/balldrop-stim/\";\r\n    const BALLDROP_PARENTTEXT = \"Make the red ball go in the blue cup! Click on a chute to drop the yellow ball from. \\n<b>FOR PARENTS</b>: Please let your child answer. You can help them with the mouse. Click NEXT when you are ready to continue.\";\r\n    // ---- Helper Functions ----\r\n    // returns random coin flip as true or false\r\n    function randomBoolean() {\r\n        return Boolean(Math.floor(Math.random() * 2));\r\n    }\r\n    function randomItem(items) {\r\n        return items[Math.floor(Math.random() * items.length)];\r\n    }\r\n\r\n    // shuffles an array\r\n    function shuffle(array) {\r\n        var shuffled = Ember.$.extend(true, [], array); // deep copy array\r\n        for (var i = array.length - 1; i > 0; i--) {\r\n            var j = Math.floor(Math.random() * (i + 1));\r\n            var temp = shuffled[i];\r\n            shuffled[i] = shuffled[j];\r\n            shuffled[j] = temp;\r\n        }\r\n        return shuffled;\r\n    }\r\n\r\n    // ---- Define non-test trial frames\r\n\r\n    var frames = {\r\n        \"welcome\": {\r\n            \"kind\": \"exp-lookit-text\",\r\n            \"blocks\": [\r\n                {\r\n                    \"emph\": true,\r\n                    \"title\": \"Thank you for your interest in our study!\",\r\n                    \"text\": \"Reminder: Your child does not need to be with you until the study videos begin.\"\r\n                },\r\n                {\r\n                    \"text\": \"Here's a quick summary of what's about to happen:\",\r\n                    \"listblocks\": [\r\n                        {\r\n                            \"text\": \"1. Webcam Setup and Video Consent. First, we'll be checking that your webcam is working. Then you and your child will give your consent to participate in this research.\"\r\n                        },\r\n                        {\r\n                            \"text\": \"2. Study Overview. Here, you will learn a little more about what your child will be doing in this study, along with some other important details about your role in the game.\"\r\n                        },\r\n                        { \"text\": \"3. When you click the 'Start the game!' button on the Study Overview page, the study will begin! This study will take about 20 minutes in total.\" }\r\n                    ]\r\n                },\r\n                { \"text\": \"Thank you so much for helping us with our science! We hope you and your child have fun.\" }\r\n            ],\r\n            \"showPreviousButton\": false\r\n        },\r\n        \"video-config\": {\r\n            \"kind\": \"exp-video-config\",\r\n            \"troubleshootingIntro\": \"If you're having any trouble or would like us to walk you through setup, please email junyichu@fas.harvard.edu\"\r\n        },\r\n        \"video-consent\": {\r\n            \"kind\": \"exp-lookit-video-consent\",\r\n            \"template\": \"consent_garden\",\r\n            \"PIName\": \"Junyi Chu\",\r\n            \"institution\": \"Harvard University\",\r\n            \"PIContact\": \"Junyi Chu at junyichu@fas.harvard.edu\",\r\n            \"lab\": \"Bonawitz Computational Cognitive Development Group\",\r\n            \"overview_header\": \"\",\r\n            \"study_info_content\": \"This study is run by Junyi Chu from the Bonawitz Computational Cognitive Development Group at Harvard University. In this study, your child will play two minigames, where they will answer some riddles and solve some puzzles.\",\r\n            \"purpose_content\": \"We're interested in how children come up with new ideas. Research shows that children can be more exploratory than adults, which may help them to learn quickly and adapt to new situations in creative ways. In this study, we want to see how children's reasoning changes as they encounter different categories of problems.\",\r\n            \"eligibility_content\": \"Any child who is currently 3-, 4-, 5-, or 6-years-old and is able to understand English is able to participate as long as a main caregiver or parent (that is, someone who is legally able to make decisions for the child) gives permission.\",\r\n            \"procedures_content\": \"There are two parts to this study. In <b>Part 1</b>, your child will hear a series of riddles describing puzzling everyday situations. We will ask your child to explain what happened, and we will ask you to click along the study with them. After providing their answers, your child will also hear the correct solutions. In <b>Part 2</b>, your child will play a ball drop game. First, your child will practice clicking on the screen to guess where the ball will go or where it was dropped. Then, your child will complete three puzzles, deciding where to drop the ball in order to make other objects move to different locations. After providing their answers, your child will see the correct solutions.\",\r\n            \"benefits_content\": \"Your participation in this study can help us learn more about families and their children and how families are important to child development. Although it may take a few years for us to share our findings, you will also have the opportunity to read about the study findings yourself. Although there are no other direct benefits to participation, many children/caregivers find participating in our research enjoyable.\",\r\n            \"data_sharing_learn\": \"better understand how 3- to 6-year-old children learn and develop.\",\r\n            \"irb_contact\": \"Harvard's Committee on the Use of Human Subjects (cuhs@harvard.edu)\",\r\n            \"include_databrary\": true,\r\n            \"intro_sentence\": \"\",\r\n        },\r\n        \"parent-instructions-stumpers\": {\r\n            \"kind\": \"exp-lookit-instruction-video\",\r\n            \"displayFullscreenOverride\": true,\r\n            \"instructionsVideo\": [\r\n                {\r\n                    \"src\": \"https://cocodev.opalstacked.com/experiments/junyi/kid-stumpers-stimuli/mp4/parent-instructions.mp4\",\r\n                    \"type\": \"video/mp4\"\r\n                }\r\n            ],\r\n            \"introText\": \"Welcome to the study! Your child does not need to be with you until the riddles begin. Please watch this video to get started. \\n(Or you can read the summary to the right if you prefer.)\",\r\n            \"transcriptTitle\": \"Video summary\",\r\n            \"transcriptBlocks\": [\r\n                {\r\n                    \"title\": \"Study overview\",\r\n                    \"listblocks\": [\r\n                        {\r\n                            \"text\": \"We will need your presence at all times during the game. This video is for you, but we'll tell you when to get your child. The most important role you have during the game is to keep your child focused.\"\r\n                        },\r\n                        {\r\n                            \"text\": \"In <b>Part 1: the riddle game</b>, your child will hear 9 different questions that ask them to explain a puzzling situation. If you need to, you can always repeat a question, but please do not rephrase the question. Often the easiest thing to do is to click this blue REPLAY button which will repeat the question for you. \"\r\n                        },\r\n                        {\r\n                            \"text\": \"Every once in a while, your child might not answer a question. They might say they don't know or give an answer that is only partially complete. You can encourage your child by saying, ''That's ok, you can just guess'', or, ''Oh, please tell me more''. But if they keep saying they don't know, you can just click to move on whenever the green NEXT button appears. \"\r\n                        },\r\n                        {\r\n                            \"text\": \"After each question, your child will hear an animal character share their answer. Please click on ONE of the options to tell us if your child gave a similar answer, a different answer, or did not have an answer. \"\r\n                        },\r\n                        {\r\n                            \"text\": \"In <b>Part 2: the ball drop game</b>, your child will try to get a red ball into a blue cup, by clicking on the screen.\"\r\n                        },\r\n                        {\r\n                            \"text\": \"OK, it's time to get your child! Thank you very much. We really appreciate your help!\"\r\n                        }\r\n                    ]\r\n                }\r\n            ],\r\n            \"warningText\": \"Please watch the video or read the summary before proceeding.\",\r\n            \"nextButtonText\": \"I'm ready to go get my child!\",\r\n            \"title\": \"Study instructions\",\r\n            \"showPreviousButton\": false\r\n        },\r\n        \"Storybook-Module2A-Intro\": {\r\n            \"kind\": \"exp-lookit-video\",\r\n            \"video\": {\r\n                \"source\": \"GARDEN_Phase2_2A_Intro_V03\",\r\n                \"loop\": false,\r\n                \"position\": \"fill\",\r\n                \"controls\": true\r\n            },\r\n            \"parentTextBlock\": {\r\n                \"text\": \"\\n \\n Press the space bar if you need to restart the video!\"\r\n            },\r\n            \"autoProceed\": false,\r\n            \"controls\": true,\r\n            \"backgroundColor\": \"black\",\r\n            \"nextButtonText\": \"Play the game!\",\r\n            \"requiredDuration\": 0,\r\n            \"requireVideoCount\": 1,\r\n            \"doRecording\": false,\r\n            \"baseDir\": \"https://files.osf.io/v1/resources/5jakm/providers/osfstorage/6671a52465e1de5efc893b84?direct=&mode=render\",\r\n            \"videoTypes\": [\r\n                \"webm\",\r\n                \"mp4\"\r\n            ]\r\n        },\r\n        \"Storybook-Module2A-Outro\": {\r\n            \"kind\": \"exp-lookit-video\",\r\n            \"video\": {\r\n                \"loop\": false,\r\n                \"position\": \"fill\",\r\n                \"controls\": true,\r\n                \"source\": \"GARDEN_Phase2_2A_Outro_V03\"\r\n            },\r\n            \"parentTextBlock\": {\r\n                \"text\": \"\\n \\n Press the space bar if you need to restart the video!\"\r\n            },\r\n            \"autoProceed\": false,\r\n            \"controls\": true,\r\n            \"backgroundColor\": \"black\",\r\n            \"nextButtonText\": \"Play the game!\",\r\n            \"requiredDuration\": 0,\r\n            \"requireVideoCount\": 1,\r\n            \"doRecording\": false,\r\n            \"baseDir\": \"https://files.osf.io/v1/resources/5jakm/providers/osfstorage/666876e96b6c8e2cb304cdad?direct=&mode=render\",\r\n            \"videoTypes\": [\r\n                \"webm\",\r\n                \"mp4\"\r\n            ]\r\n        },\r\n        \"game-transition\": {\r\n            \"kind\": \"exp-lookit-video\",\r\n            \"videoTypes\": [\"mp4\"],\r\n            \"baseDir\": STIMDIR,\r\n            \"video\": {\r\n                \"loop\": false,\r\n                \"position\": \"fill\",\r\n                \"source\": \"game_transition\"\r\n            },\r\n            \"backgroundColor\": \"white\",\r\n            \"autoProceed\": false,\r\n            \"doRecording\": true,\r\n            \"requireVideoCount\": 1,\r\n            \"frameOffsetAfterPause\": 0,\r\n            \"parentTextBlock\": {\r\n                \"text\": \"<b>FOR PARENTS</b>: The ball drop game takes about 6 minutes to complete. Feel free to pause (press space bar) and take a short break before continuing.\",\r\n            },\r\n        },\r\n        \"start-recording-with-video\": {\r\n            \"kind\": \"exp-lookit-start-recording\",\r\n            \"baseDir\": STIMDIR,\r\n            \"videoTypes\": [\"mp4\"],\r\n            \"video\": \"attentiongrabber\",\r\n            \"displayFullscreen\": true\r\n        },\r\n        \"stop-recording-with-video\": {\r\n            \"kind\": \"exp-lookit-stop-recording\",\r\n            \"baseDir\": STIMDIR,\r\n            \"videoTypes\": [\r\n                \"mp4\"\r\n            ],\r\n            \"video\": \"attentiongrabber\",\r\n            \"displayFullscreen\": true,\r\n            \"showProgressBar\": true,\r\n        },\r\n        \"balldrop-tutorial-intro\": { // we'll play the ball drop game in rooms that look like this\r\n            \"kind\": \"exp-lookit-video\",\r\n            \"videoTypes\": [\"mp4\"],\r\n            \"baseDir\": STIMDIR,\r\n            \"video\": {\r\n                \"loop\": false,\r\n                \"position\": \"fill\",\r\n                \"source\": \"balldrop_tutorial_intro\"\r\n            },\r\n            \"backgroundColor\": \"white\",\r\n            \"autoProceed\": true,\r\n            \"requireVideoCount\": 1,\r\n            \"frameOffsetAfterPause\": 0,\r\n            \"parentTextBlock\": {\r\n                \"text\": \"\",\r\n            },\r\n        },\r\n        'balldrop-tutorial1-puzzle': { // for the rest of the game, make the red ball go in the blue cup. Drop the yellow ball down this tube.\r\n            \"kind\": \"exp-lookit-images-audio\",\r\n            \"audio\": \"balldrop_tutorial1_puzzle\",\r\n            \"id\": \"balldrop-tutorial1-puzzle\",\r\n            \"images\": [{\r\n                \"id\": \"levelTutorial_puzzle\",\r\n                \"src\": \"balldrop_tutorial1_puzzle.jpeg\",\r\n                \"position\": \"fill\",\r\n                \"top\": 0,\r\n                \"nonChoiceOption\": true,\r\n            },\r\n            // {\r\n            //     \"id\": \"1\",\r\n            //     \"src\": \"balldrop_chuteL.jpeg\",\r\n            //     \"left\": 21.5,\r\n            //     \"top\": 25.4,\r\n            //     \"height\": 30,//\r\n            //     \"correct\": false,\r\n            //     \"feedbackAudio\": \"balldrop_notthisone\",\r\n            // },\r\n            // {\r\n            //     \"id\": \"2\",\r\n            //     \"src\": \"balldrop_chuteV.jpeg\",\r\n            //     \"left\": 30,//\r\n            //     \"top\": 0,\r\n            //     \"height\": 26,\r\n            //     \"correct\": false,\r\n            //     \"feedbackAudio\": \"balldrop_notthisone\",\r\n            // },\r\n            // {\r\n            //     \"id\": \"3\",\r\n            //     \"src\": \"balldrop_chuteV.jpeg\",\r\n            //     \"left\": 41.5,\r\n            //     \"top\": 0,\r\n            //     \"height\": 26,\r\n            //     \"correct\": false,\r\n            //     \"feedbackAudio\": \"balldrop_notthisone\",\r\n            // },\r\n            // {\r\n            //     \"id\": \"4\",\r\n            //     \"src\": \"balldrop_chuteV.jpeg\",\r\n            //     \"left\": 53,\r\n            //     \"top\": 0,\r\n            //     \"height\": 26,\r\n            //     \"correct\": false,\r\n            //     \"feedbackAudio\": \"balldrop_notthisone\",\r\n            // },\r\n            // {\r\n            //     \"id\": \"5\",\r\n            //     \"src\": \"balldrop_chuteV.jpeg\",\r\n            //     \"left\": 64.5,\r\n            //     \"top\": 0,\r\n            //     \"height\": 26,\r\n            //     \"correct\": false,\r\n            //     \"feedbackAudio\": \"balldrop_notthisone\",\r\n            // },\r\n            {\r\n                \"id\": \"6\",\r\n                \"src\": \"balldrop_chuteR.jpeg\",\r\n                \"left\": 68.9,\r\n                \"top\": 25.4,\r\n                \"height\": 30,\r\n                \"feedbackAudio\": \"balldrop_letswatch\",\r\n                \"displayDelayMs\": 11000,\r\n                \"correct\": true,\r\n            }\r\n            ],\r\n            \"highlights\": [\r\n                {\r\n                    \"range\": [\r\n                        11,\r\n                        11.5\r\n                    ],\r\n                    \"imageId\": \"6\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        12,\r\n                        12.5\r\n                    ],\r\n                    \"imageId\": \"6\"\r\n                }\r\n            ],\r\n            \"baseDir\": STIMDIR,\r\n            \"audioTypes\": [\"wav\"],\r\n            \"backgroundColor\": \"white\",\r\n            \"showPreviousButton\": false,\r\n            \"showProgressBar\": false,\r\n            \"autoProceed\": true,\r\n            \"choiceRequired\": true,\r\n            \"correctChoiceRequired\": true,\r\n            \"canMakeChoiceBeforeAudioFinished\": false,\r\n            \"showReplayButton\": true,\r\n            \"parentTextBlock\": {\r\n                \"text\": \"Make the red ball go into the blue cup! \\n\\nFOR PARENTS: Please let your child click the highlighted chute. You can help them move the mouse.\",\r\n            },\r\n        },\r\n        'balldrop-tutorial1-outcome': { // great job!\r\n            \"kind\": \"exp-lookit-video\",\r\n            \"videoTypes\": [\"mp4\"],\r\n            \"baseDir\": STIMDIR,\r\n            \"video\": {\r\n                \"loop\": false,\r\n                \"position\": \"fill\",\r\n                \"source\": \"balldrop_tutorial1_outcome\"\r\n            },\r\n            \"backgroundColor\": \"white\",\r\n            \"autoProceed\": false,\r\n            \"requireVideoCount\": 1,\r\n            \"frameOffsetAfterPause\": 0,\r\n            \"parentTextBlock\": {\r\n                \"text\": \"FOR PARENTS: Click next when you are ready to continue.\"\r\n            },\r\n        },\r\n        'balldrop-tutorial2-puzzle': { // sometimes there are green blocks. Green blocks can move when.. now your turn\r\n            \"kind\": \"exp-lookit-images-audio\",\r\n            \"audio\": \"balldrop_tutorial2_puzzle\",\r\n            \"id\": \"balldrop-tutorial2-puzzle\",\r\n            \"images\": [{\r\n                \"id\": \"levelTutorial_puzzle\",\r\n                \"src\": \"balldrop_tutorial2_puzzle.jpeg\",\r\n                \"position\": \"fill\",\r\n                \"top\": 0,\r\n                \"nonChoiceOption\": true,\r\n            },\r\n            // {\r\n            //     \"id\": \"1\",\r\n            //     \"src\": \"balldrop_chuteL.jpeg\",\r\n            //     \"left\": 21.5,\r\n            //     \"top\": 25.4,\r\n            //     \"height\": 30,//\r\n            //     \"correct\": false,\r\n            //     \"feedbackAudio\": \"balldrop_notthisone\",\r\n            // },\r\n            // {\r\n            //     \"id\": \"2\",\r\n            //     \"src\": \"balldrop_chuteV.jpeg\",\r\n            //     \"left\": 30,//\r\n            //     \"top\": 0,\r\n            //     \"height\": 26,\r\n            //     \"correct\": false,\r\n            //     \"feedbackAudio\": \"balldrop_notthisone\",\r\n            // },\r\n            {\r\n                \"id\": \"3\",\r\n                \"src\": \"balldrop_chuteV.jpeg\",\r\n                \"left\": 41.5,\r\n                \"top\": 0,\r\n                \"height\": 26,\r\n                \"feedbackAudio\": \"balldrop_letswatch\",\r\n                \"correct\": true,\r\n                \"displayDelayMs\": 6000,\r\n            },\r\n                // {\r\n                //     \"id\": \"4\",\r\n                //     \"src\": \"balldrop_chuteV.jpeg\",\r\n                //     \"left\": 53,\r\n                //     \"top\": 0,\r\n                //     \"height\": 26,\r\n                //     \"correct\": false,\r\n                //     \"feedbackAudio\": \"balldrop_notthisone\",\r\n                // },\r\n                // {\r\n                //     \"id\": \"5\",\r\n                //     \"src\": \"balldrop_chuteV.jpeg\",\r\n                //     \"left\": 64.5,\r\n                //     \"top\": 0,\r\n                //     \"height\": 26,\r\n                //     \"correct\": false,\r\n                //     \"feedbackAudio\": \"balldrop_notthisone\",\r\n                // },\r\n                // {\r\n                //     \"id\": \"6\",\r\n                //     \"src\": \"balldrop_chuteR.jpeg\",\r\n                //     \"left\": 68.9,\r\n                //     \"top\": 25.4,\r\n                //     \"height\": 30,// \"correct\": false,\r\n                //     \"feedbackAudio\": \"balldrop_notthisone\",\r\n                // }\r\n            ],\r\n            \"highlights\": [\r\n                {\r\n                    \"range\": [\r\n                        6,\r\n                        6.5\r\n                    ],\r\n                    \"imageId\": \"3\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        7,\r\n                        7.5\r\n                    ],\r\n                    \"imageId\": \"3\"\r\n                }\r\n            ],\r\n            \"baseDir\": STIMDIR,\r\n            \"audioTypes\": [\"wav\"],\r\n            \"backgroundColor\": \"white\",\r\n            \"showPreviousButton\": false,\r\n            \"showProgressBar\": false,\r\n            \"autoProceed\": true,\r\n            \"choiceRequired\": true,\r\n            \"correctChoiceRequired\": true,\r\n            \"canMakeChoiceBeforeAudioFinished\": false,\r\n            \"showReplayButton\": true,\r\n            \"parentTextBlock\": {\r\n                \"text\": \"Make the red ball go into the blue cup!\\n\\nFOR PARENTS: Please let your child click the highlighted chute. You can help them move the mouse or replay the prompt.\",\r\n            },\r\n        },\r\n        'balldrop-tutorial2-outcome': { // make the red ball\r\n            \"kind\": \"exp-lookit-video\",\r\n            \"videoTypes\": [\"mp4\"],\r\n            \"baseDir\": STIMDIR,\r\n            \"video\": {\r\n                \"loop\": false,\r\n                \"position\": \"fill\",\r\n                \"source\": \"balldrop_tutorial2_outcome\"\r\n            },\r\n            \"backgroundColor\": \"white\",\r\n            \"autoProceed\": false,\r\n            \"requireVideoCount\": 1,\r\n            \"frameOffsetAfterPause\": 0,\r\n            \"parentTextBlock\": {\r\n                \"text\": \"FOR PARENTS: Click next to begin the first puzzle.\",\r\n            },\r\n        },\r\n        \"balldrop-trial1-done\": { // open door 2\r\n            \"id\": \"balldrop-trial2-intro\", // CALLED IN FEEDBACK FRAMES SELECTOR FUNCTION\r\n            \"kind\": \"exp-lookit-video\",\r\n            \"videoTypes\": [\"mp4\"],\r\n            \"video\": {\r\n                \"loop\": false,\r\n                \"position\": \"fill\",\r\n                \"source\": \"balldrop_testIntro2\"\r\n            },\r\n            \"requireVideoCount\": 1,\r\n            \"frameOffsetAfterPause\": 0,\r\n            \"baseDir\": STIMDIR,\r\n            \"backgroundColor\": \"white\",\r\n            \"autoProceed\": false,\r\n        },\r\n        \"balldrop-trial2-done\": { // open last door\r\n            \"id\": \"balldrop-trial3-intro\", // CALLED IN FEEDBACK FRAMES SELECTOR FUNCTION\r\n            \"kind\": \"exp-lookit-video\",\r\n            \"videoTypes\": [\"mp4\"],\r\n            \"video\": {\r\n                \"loop\": false,\r\n                \"position\": \"fill\",\r\n                \"source\": \"balldrop_testIntro3\"\r\n            },\r\n            \"requireVideoCount\": 1,\r\n            \"frameOffsetAfterPause\": 0,\r\n            \"baseDir\": STIMDIR,\r\n            \"backgroundColor\": \"white\",\r\n            \"autoProceed\": false,\r\n        },\r\n        \"balldrop-trial3-done\": { // all 3 doors star, now few more questions\r\n            \"kind\": \"exp-lookit-video\",\r\n            \"id\": \"balldrop-trial3-done\",\r\n            \"videoTypes\": [\"mp4\"],\r\n            \"video\": {\r\n                \"loop\": false,\r\n                \"position\": \"fill\",\r\n                \"source\": \"balldrop_checkQnIntro\"\r\n            },\r\n            \"requireVideoCount\": 1,\r\n            \"frameOffsetAfterPause\": 0,\r\n            \"baseDir\": STIMDIR,\r\n            \"audioTypes\": [\"wav\"],\r\n            \"backgroundColor\": \"white\",\r\n            \"autoProceed\": true,\r\n            \"showPreviousButton\": false,\r\n            \"showProgressBar\": false,\r\n        },\r\n        \"balldrop-alldone\": { // all done\r\n            \"kind\": \"exp-lookit-video\",\r\n            \"id\": \"balldrop-alldone\",\r\n            \"videoTypes\": [\"mp4\"],\r\n            \"video\": {\r\n                \"loop\": false,\r\n                \"position\": \"fill\",\r\n                \"source\": \"balldrop_alldone\"\r\n            },\r\n            \"requireVideoCount\": 1,\r\n            \"frameOffsetAfterPause\": 0,\r\n            \"baseDir\": STIMDIR,\r\n            \"audioTypes\": [\"wav\"],\r\n            \"backgroundColor\": \"white\",\r\n            \"autoProceed\": true,\r\n            \"showPreviousButton\": false,\r\n            \"showProgressBar\": false,\r\n        },\r\n        \"trialA-test\": {\r\n            // up to 6 frames\r\n            \"id\": 'balldrop-testA-procedure',\r\n            \"kind\": \"exp-frame-select\",\r\n            \"displayFullscreenOverride\": true,\r\n            \"commonFrameProperties\": {\r\n                \"displayFullscreenOverride\": true,\r\n                \"baseDir\": STIMDIR,\r\n                \"audioTypes\": [\"wav\"],\r\n                \"audio\": {\r\n                    \"loop\": false,\r\n                },\r\n                \"backgroundColor\": \"white\",\r\n                \"autoProceed\": true,\r\n                \"showPreviousButton\": false,\r\n                \"showProgressBar\": false,\r\n                \"showReplayButton\": true,\r\n                \"parentTextBlock\": {\r\n                    \"text\": \"\",\r\n                },\r\n            },\r\n            \"frameOptions\": [ // prompt, wrong, prompt, wrong, prompt, wrong\r\n                { // PUZZLE PROMPT 1\r\n                    \"id\": \"balldrop-testA-attempt1\", // CUSTOMIZE\r\n                    \"kind\": \"exp-lookit-images-audio\",\r\n                    \"audio\": \"balldrop_test_prompt\",\r\n                    \"baseDir\": STIMDIR,\r\n                    \"audioTypes\": [\"wav\"],\r\n                    \"backgroundColor\": \"white\",\r\n                    \"choiceRequired\": true,\r\n                    \"correctChoiceRequired\": false,\r\n                    \"canMakeChoiceBeforeAudioFinished\": false,\r\n                    \"parentTextBlock\": {\r\n                        \"text\": BALLDROP_PARENTTEXT,\r\n                    },\r\n                    \"images\": [{\r\n                        \"src\": \"balldrop_testA_puzzle.jpeg\",\r\n                        \"position\": \"fill\",\r\n                        \"top\": 0,\r\n                        \"nonChoiceOption\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"1\",\r\n                        \"src\": \"balldrop_chuteL.jpeg\",\r\n                        \"left\": 21.5, // OK\r\n                        \"top\": 25.4, // OK\r\n                        \"height\": 30, // OK\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"2\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 30.3, // OK\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"3\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 41.7,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"4\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 53.2,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"5\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 63.5,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"6\",\r\n                        \"src\": \"balldrop_chuteR.jpeg\",\r\n                        \"left\": 68.9,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,\r\n                        // \"left\": 68.9,\r\n                        // \"top\": 25.4,\r\n                        // \"height\": 30,// OK\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    }\r\n                    ],\r\n                    // --- SELECT NEXT FRAME: Whatever happens, play the next frame\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {return (frameIndex + 1);}\"\r\n                },\r\n                { // FEEDBACK 1\r\n                    \"id\": \"balldrop-testA-feedback1\", // CUSTOMIZE\r\n                    \"kind\": \"exp-lookit-video\",\r\n                    \"audio\": { \"source\": \"balldrop_feedback1wrong\" },// CUSTOMIZE #TODO\r\n                    \"videoTypes\": [\"mp4\"],\r\n                    \"video\": {\r\n                        \"loop\": false,\r\n                        \"source\": 'balldrop_testA_vid1', // CUSTOMIZE\r\n                        \"position\": \"fill\",\r\n                    },\r\n                    \"requireVideoCount\": 1,\r\n                    \"requireAudioCount\": 1,\r\n                    \"frameOffsetAfterPause\": 0,\r\n                    // Determine which video and audio to play, depending on which chute was chosen\r\n                    // CUSTOMIZE thevideo and theaudio\r\n                    \"generateProperties\": \"function(expData, sequence, child, pastSessions, conditions){console.log(expData[sequence[sequence.length - 1]]); var thevideo = 'balldrop_testA_vid' + expData[sequence[sequence.length - 1]]['selectedImage']; var theaudio = 'balldrop_feedback1wrong'; if (expData[sequence[sequence.length - 1]]['correctImageSelected']) {theaudio = 'balldrop_feedback_good';}; return { 'video': { 'source': thevideo, 'position':'fill' }, 'audio': { 'source': theaudio }};}\",\r\n                    // Then choose next frame (if correct, go to 'trial2-intro'. If wrong, go to next frame.)\r\n                    // CUSTOMIZE indexOf(...)\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { return frameIndex+6; } else { return frameIndex+1; }}\"\r\n                    // \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { var transitionFrame = 0; for (var iFrame = 0; iFrame < frames.length; iFrame++) { if (frames[iFrame]['id'].indexOf('balldrop-trial2-intro') != -1) { transitionFrame = iFrame; break;} }; console.log(transitionFrame); return transitionFrame; } else { return frameIndex+1; }}\"\r\n                },\r\n                { // PUZZLE PROMPT 2\r\n                    \"id\": \"balldrop-testA-attempt2\", // CUSTOMIZE\r\n                    \"kind\": \"exp-lookit-images-audio\",\r\n                    \"audio\": \"balldrop_test_prompt_short\",\r\n                    \"baseDir\": STIMDIR,\r\n                    \"audioTypes\": [\"wav\"],\r\n                    \"backgroundColor\": \"white\",\r\n                    \"choiceRequired\": true,\r\n                    \"correctChoiceRequired\": false,\r\n                    \"canMakeChoiceBeforeAudioFinished\": false,\r\n                    \"parentTextBlock\": {\r\n                        \"text\": BALLDROP_PARENTTEXT,\r\n                    },\r\n                    \"images\": [{\r\n                        \"src\": \"balldrop_testA_puzzle.jpeg\",\r\n                        \"position\": \"fill\",\r\n                        \"top\": 0,\r\n                        \"nonChoiceOption\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"1\",\r\n                        \"src\": \"balldrop_chuteL.jpeg\",\r\n                        \"left\": 21.5,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,// OK\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"2\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 30.3,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"3\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 41.8,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"4\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 53.2,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"5\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 63.5,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"6\",\r\n                        \"src\": \"balldrop_chuteR.jpeg\",\r\n                        \"left\": 68.9,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30, // OK\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    }\r\n                    ],\r\n                    // --- SELECT NEXT FRAME: Whatever happens, play the next frame\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {return (frameIndex + 1);}\"\r\n                },\r\n                { // FEEDBACK 2\r\n                    \"id\": \"balldrop-testA-feedback2\", // CUSTOMIZE\r\n                    \"kind\": \"exp-lookit-video\",\r\n                    \"audio\": {\r\n                        \"loop\": false,\r\n                        \"source\": \"balldrop_feedback2wrong\", // FIXME ADD SILENCE SO AUDIO PLAYS AFTER ANIMATION ENDS\r\n                        \"position\": \"fill\",\r\n                    },\r\n                    \"videoTypes\": [\"mp4\"],\r\n                    \"requireAudioCount\": 1,\r\n                    \"video\": {\r\n                        \"loop\": false,\r\n                        \"position\": \"fill\",\r\n                        \"source\": \"balldrop_testA_vid1\",\r\n                    },\r\n                    \"requireVideoCount\": 1,\r\n                    \"frameOffsetAfterPause\": 0,\r\n                    // Determine which video and audio to play, depending on which chute was chosen\r\n                    // CUSTOMIZE thevideo and theaudio\r\n                    \"generateProperties\": \"function(expData, sequence, child, pastSessions, conditions){console.log(expData[sequence[sequence.length - 1]]); var thevideo = 'balldrop_testA_vid' + expData[sequence[sequence.length - 1]]['selectedImage']; var theaudio = 'balldrop_feedback2wrong'; if (expData[sequence[sequence.length - 1]]['correctImageSelected']) {theaudio = 'balldrop_feedback_good';}; return { 'video': { 'source': thevideo, 'position':'fill'}, 'audio': { 'source': theaudio }};}\",\r\n                    // Then choose next frame (if correct, go to transition frame. If wrong, go to next frame.)\r\n                    // CUSTOMIZE indexOf(...)\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { return frameIndex+4; } else { return frameIndex+1; }}\"\r\n                    // \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { var transitionFrame = 0; for (var iFrame = 0; iFrame < frames.length; iFrame++) { if (frames[iFrame]['id'].indexOf('balldrop-trial2-intro') != -1) { transitionFrame = iFrame; break;} }; console.log(transitionFrame); return transitionFrame; } else { return frameIndex+1; }}\"\r\n                },\r\n                { // PUZZLE PROMPT 3\r\n                    \"id\": \"balldrop-testA-attempt3\", // CUSTOMIZE\r\n                    \"kind\": \"exp-lookit-images-audio\",\r\n                    \"audio\": \"balldrop_test_prompt_short\",\r\n                    \"baseDir\": STIMDIR,\r\n                    \"audioTypes\": [\"wav\"],\r\n                    \"backgroundColor\": \"white\",\r\n                    \"choiceRequired\": true,\r\n                    \"correctChoiceRequired\": false,\r\n                    \"canMakeChoiceBeforeAudioFinished\": false,\r\n                    \"parentTextBlock\": {\r\n                        \"text\": BALLDROP_PARENTTEXT,\r\n                    },\r\n                    \"images\": [{\r\n                        \"src\": \"balldrop_testA_puzzle.jpeg\",\r\n                        \"position\": \"fill\",\r\n                        \"top\": 0,\r\n                        \"nonChoiceOption\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"1\",\r\n                        \"src\": \"balldrop_chuteL.jpeg\",\r\n                        \"left\": 21.5,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,//\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"2\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 30.3,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"3\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 41.8,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"4\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 53.2,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"5\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 63.5,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"6\",\r\n                        \"src\": \"balldrop_chuteR.jpeg\",\r\n                        \"left\": 68.9,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30, // OK\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    }\r\n                    ],\r\n                    // --- SELECT NEXT FRAME: Whatever happens, play the next frame\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {return (frameIndex + 1);}\"\r\n                },\r\n                { // FEEDBACK 3\r\n                    \"id\": \"balldrop-testA-feedback3\",\r\n                    \"kind\": \"exp-lookit-video\",\r\n                    \"audio\": {\r\n                        \"loop\": false,\r\n                        \"source\": \"balldrop_feedback3wrong\", // FIXME ADD SILENCE SO AUDIO PLAYS AFTER ANIMATION ENDS\r\n                        \"position\": \"fill\",\r\n                    },\r\n                    \"videoTypes\": [\"mp4\"],\r\n                    \"requireAudioCount\": 1,\r\n                    \"video\": {\r\n                        \"loop\": false,\r\n                        \"position\": \"fill\",\r\n                        \"source\": \"balldrop_testA_vid1\",\r\n                    },\r\n                    \"requireVideoCount\": 1,\r\n                    \"frameOffsetAfterPause\": 0,\r\n                    // Determine which video and audio to play, depending on which chute was chosen\r\n                    // CUSTOMIZE thevideo and theaudio\r\n                    \"generateProperties\": \"function(expData, sequence, child, pastSessions, conditions){console.log(expData[sequence[sequence.length - 1]]); var thevideo = 'balldrop_testA_vid' + expData[sequence[sequence.length - 1]]['selectedImage']; var theaudio = 'balldrop_feedback3wrong'; if (expData[sequence[sequence.length - 1]]['correctImageSelected']) {theaudio = 'balldrop_feedback_good';}; return { 'video': { 'source': thevideo, 'position':'fill' }, 'audio': { 'source': theaudio }};}\",\r\n                    // Then choose next frame (if correct, go to transition frame. If wrong, go to next frame.)\r\n                    // CUSTOMIZE indexOf(...)\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { return frameIndex+2; } else { return frameIndex+1; }}\"\r\n                    // \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { var transitionFrame = 0; for (var iFrame = 0; iFrame < frames.length; iFrame++) { if (frames[iFrame]['id'].indexOf('balldrop-trial2-intro') != -1) { transitionFrame = iFrame; break;} }; console.log(transitionFrame); return transitionFrame; } else { return frameIndex+1; }}\"\r\n                },\r\n                { // SOLUTION\r\n                    \"id\": \"balldrop-testA-solution\",\r\n                    \"kind\": \"exp-lookit-video\",\r\n                    \"video\": {\r\n                        \"loop\": false,\r\n                        \"source\": \"balldrop_testA_vid1\",\r\n                        \"position\": \"fill\",\r\n                    },\r\n                    \"videoTypes\": [\"mp4\"],\r\n                    \"requireVideoCount\": 1,\r\n                    \"frameOffsetAfterPause\": 0,\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) { return frameIndex+1; }\"\r\n                }\r\n            ]\r\n        },\r\n        \"trialB-test\": {\r\n            // up to 6 frames\r\n            \"id\": 'balldrop-testB-procedure',\r\n            \"kind\": \"exp-frame-select\",\r\n            \"displayFullscreenOverride\": true,\r\n            \"commonFrameProperties\": {\r\n                \"baseDir\": STIMDIR,\r\n                \"audioTypes\": [\"wav\"],\r\n                \"audio\": {\r\n                    \"loop\": false,\r\n                },\r\n                \"displayFullscreenOverride\": true,\r\n                \"backgroundColor\": \"white\",\r\n                \"autoProceed\": true,\r\n                \"showPreviousButton\": false,\r\n                \"showProgressBar\": false,\r\n                \"showReplayButton\": true,\r\n                \"parentTextBlock\": {\r\n                    \"text\": \"\",\r\n                },\r\n            },\r\n            \"frameOptions\": [ // prompt, wrong, prompt, wrong, prompt, wrong\r\n                { // PUZZLE PROMPT 1\r\n                    \"id\": \"balldrop-testB-attempt1\",\r\n                    \"kind\": \"exp-lookit-images-audio\",\r\n                    \"audio\": \"balldrop_test_prompt\",\r\n                    \"baseDir\": STIMDIR,\r\n                    \"audioTypes\": [\"wav\"],\r\n                    \"backgroundColor\": \"white\",\r\n                    \"choiceRequired\": true,\r\n                    \"correctChoiceRequired\": false,\r\n                    \"canMakeChoiceBeforeAudioFinished\": false,\r\n                    \"parentTextBlock\": {\r\n                        \"text\": BALLDROP_PARENTTEXT,\r\n                    },\r\n                    \"images\": [{\r\n                        \"src\": \"balldrop_testB_puzzle.jpeg\",\r\n                        \"position\": \"fill\",\r\n                        \"top\": 0,\r\n                        \"nonChoiceOption\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"1\",\r\n                        \"src\": \"balldrop_chuteL.jpeg\",\r\n                        \"left\": 21.5,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,// OK\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"2\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 30.3,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"3\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 41.8,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"4\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 53.2,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"5\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 63.5,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"6\",\r\n                        \"src\": \"balldrop_chuteR.jpeg\",\r\n                        \"left\": 68.9,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30, // OK\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    }\r\n                    ],\r\n                    // --- SELECT NEXT FRAME: Whatever happens, play the next frame\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {return (frameIndex + 1);}\"\r\n                },\r\n                { // FEEDBACK 1\r\n                    \"id\": \"balldrop-testB-feedback1\",\r\n                    \"kind\": \"exp-lookit-video\",\r\n                    \"audio\": { \"source\": \"balldrop_feedback1wrong\" },\r\n                    \"videoTypes\": [\"mp4\"],\r\n                    \"video\": {\r\n                        \"loop\": false,\r\n                        \"position\": \"fill\",\r\n                        'source': 'balldrop_testB_vid2'\r\n                    },\r\n                    \"requireVideoCount\": 1,\r\n                    \"requireAudioCount\": 1,\r\n                    \"frameOffsetAfterPause\": 0,\r\n                    // Determine which video and audio to play, depending on which chute was chosen\r\n                    // CUSTOMIZE thevideo and theaudio\r\n                    \"generateProperties\": \"function(expData, sequence, child, pastSessions, conditions){console.log(expData[sequence[sequence.length - 1]]); var thevideo = 'balldrop_testB_vid' + expData[sequence[sequence.length - 1]]['selectedImage']; var theaudio = 'balldrop_feedback1wrong'; if (expData[sequence[sequence.length - 1]]['correctImageSelected']) {theaudio = 'balldrop_feedback_good';}; return { 'video': { 'source': thevideo, 'position':'fill' }, 'audio': { 'source': theaudio }};}\",\r\n                    // Then choose next frame (if correct, go to transition frame. If wrong, go to next frame.)\r\n                    // CUSTOMIZE indexOf(...)\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { return frameIndex+6; } else { return frameIndex+1; }}\"\r\n                    // \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { var transitionFrame = 0; for (var iFrame = 0; iFrame < frames.length; iFrame++) { if (frames[iFrame]['id'].indexOf('balldrop-trial3-intro') != -1) { transitionFrame = iFrame; break;} }; console.log(transitionFrame); return transitionFrame; } else { return frameIndex+1; }}\"\r\n                },\r\n                { // PUZZLE PROMPT 2\r\n                    \"id\": \"balldrop-testB-attempt2\",\r\n                    \"kind\": \"exp-lookit-images-audio\",\r\n                    \"audio\": \"balldrop_test_prompt_short\",\r\n                    \"baseDir\": STIMDIR,\r\n                    \"audioTypes\": [\"wav\"],\r\n                    \"backgroundColor\": \"white\",\r\n                    \"choiceRequired\": true,\r\n                    \"correctChoiceRequired\": false,\r\n                    \"canMakeChoiceBeforeAudioFinished\": false,\r\n                    \"parentTextBlock\": {\r\n                        \"text\": BALLDROP_PARENTTEXT,\r\n                    },\r\n                    \"images\": [{\r\n                        \"src\": \"balldrop_testB_puzzle.jpeg\",\r\n                        \"position\": \"fill\",\r\n                        \"top\": 0,\r\n                        \"nonChoiceOption\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"1\",\r\n                        \"src\": \"balldrop_chuteL.jpeg\",\r\n                        \"left\": 21.5,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,//\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"2\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 30.3,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"3\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 41.8,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"4\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 53.2,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"5\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 63.5,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"6\",\r\n                        \"src\": \"balldrop_chuteR.jpeg\",\r\n                        \"left\": 68.9,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    }\r\n                    ],\r\n                    // --- SELECT NEXT FRAME: Whatever happens, play the next frame\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {return (frameIndex + 1);}\"\r\n                },\r\n                { // FEEDBACK 2\r\n                    \"id\": \"balldrop-testB-feedback2\",\r\n                    \"kind\": \"exp-lookit-video\",\r\n                    \"audio\": {\r\n                        \"loop\": false,\r\n                        \"source\": \"balldrop_feedback2wrong\", // FIXME ADD SILENCE SO AUDIO PLAYS AFTER ANIMATION ENDS\r\n                    },\r\n                    \"videoTypes\": [\"mp4\"],\r\n                    \"requireAudioCount\": 1,\r\n                    \"video\": {\r\n                        \"loop\": false,\r\n                        \"position\": \"fill\",\r\n                        \"source\": \"balldrop_testB_vid1\", // CUSTOMIZE\r\n                    },\r\n                    \"requireVideoCount\": 1,\r\n                    \"frameOffsetAfterPause\": 0,\r\n                    // Determine which video and audio to play, depending on which chute was chosen\r\n                    // CUSTOMIZE thevideo and theaudio\r\n                    \"generateProperties\": \"function(expData, sequence, child, pastSessions, conditions){console.log(expData[sequence[sequence.length - 1]]); var thevideo = 'balldrop_testB_vid' + expData[sequence[sequence.length - 1]]['selectedImage']; var theaudio = 'balldrop_feedback2wrong'; if (expData[sequence[sequence.length - 1]]['correctImageSelected']) {theaudio = 'balldrop_feedback_good';}; return { 'video': { 'source': thevideo, 'position':'fill' }, 'audio': { 'source': theaudio }};}\",\r\n                    // Then choose next frame (if correct, go to transition frame. If wrong, go to next frame.)\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { return frameIndex+4; } else { return frameIndex+1; }}\"\r\n                    // \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { var transitionFrame = 0; for (var iFrame = 0; iFrame < frames.length; iFrame++) { if (frames[iFrame]['id'].indexOf('balldrop-trial3-intro') != -1) { transitionFrame = iFrame; break;} }; console.log(transitionFrame); return transitionFrame; } else { return frameIndex+1; }}\"\r\n                },\r\n                { // PUZZLE PROMPT 3\r\n                    \"id\": \"balldrop-testB-attempt3\",\r\n                    \"kind\": \"exp-lookit-images-audio\",\r\n                    \"audio\": \"balldrop_test_prompt_short\",\r\n                    \"baseDir\": STIMDIR,\r\n                    \"audioTypes\": [\"wav\"],\r\n                    \"backgroundColor\": \"white\",\r\n                    \"choiceRequired\": true,\r\n                    \"correctChoiceRequired\": false,\r\n                    \"canMakeChoiceBeforeAudioFinished\": false,\r\n                    \"parentTextBlock\": {\r\n                        \"text\": BALLDROP_PARENTTEXT,\r\n                    },\r\n                    \"images\": [{\r\n                        \"src\": \"balldrop_testB_puzzle.jpeg\",\r\n                        \"position\": \"fill\",\r\n                        \"top\": 0,\r\n                        \"nonChoiceOption\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"1\",\r\n                        \"src\": \"balldrop_chuteL.jpeg\",\r\n                        \"left\": 21.5,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,//\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"2\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 30.3,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"3\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 41.8,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"4\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 53.2,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"5\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 63.5,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"6\",\r\n                        \"src\": \"balldrop_chuteR.jpeg\",\r\n                        \"left\": 68.9,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    }\r\n                    ],\r\n                    // --- SELECT NEXT FRAME: Whatever happens, play the next frame\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {return (frameIndex + 1);}\"\r\n                },\r\n                { // FEEDBACK 3\r\n                    \"id\": \"balldrop-testB-feedback3\",\r\n                    \"kind\": \"exp-lookit-video\",\r\n                    \"audio\": {\r\n                        \"loop\": false,\r\n                        \"source\": \"balldrop_feedback3wrong\",\r\n                    },\r\n                    \"videoTypes\": [\"mp4\"],\r\n                    \"requireAudioCount\": 1,\r\n                    \"video\": {\r\n                        \"loop\": false,\r\n                        \"position\": \"fill\",\r\n                        \"source\": \"balldrop_testB_vid1\",\r\n                    },\r\n                    \"requireVideoCount\": 1,\r\n                    \"frameOffsetAfterPause\": 0,\r\n                    // Determine which video and audio to play, depending on which chute was chosen\r\n                    // CUSTOMIZE thevideo and theaudio\r\n                    \"generateProperties\": \"function(expData, sequence, child, pastSessions, conditions){console.log(expData[sequence[sequence.length - 1]]); var thevideo = 'balldrop_testB_vid' + expData[sequence[sequence.length - 1]]['selectedImage']; var theaudio = 'balldrop_feedback3wrong'; if (expData[sequence[sequence.length - 1]]['correctImageSelected']) {theaudio = 'balldrop_feedback_good';}; return { 'video': { 'source': thevideo, 'position':'fill' }, 'audio': { 'source': theaudio }};}\",\r\n                    // Then choose next frame (if correct, go to transition frame. If wrong, go to next frame.)\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { return frameIndex+2; } else { return frameIndex+1; }}\"\r\n                    // \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { var transitionFrame = 0; for (var iFrame = 0; iFrame < frames.length; iFrame++) { if (frames[iFrame]['id'].indexOf('balldrop-trial3-intro') != -1) { transitionFrame = iFrame; break;} }; console.log(transitionFrame); return transitionFrame; } else { return frameIndex+1; }}\"\r\n                },\r\n                { // SOLUTION\r\n                    \"id\": \"balldrop-testB-solution\",\r\n                    \"kind\": \"exp-lookit-video\",\r\n                    \"video\": {\r\n                        \"loop\": false,\r\n                        \"source\": \"balldrop_testB_vid2\",\r\n                        \"position\": \"fill\",\r\n                    },\r\n                    \"videoTypes\": [\"mp4\"],\r\n                    \"requireVideoCount\": 1,\r\n                    \"frameOffsetAfterPause\": 0,\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) { return frameIndex+1; }\"\r\n                }\r\n            ]\r\n        },\r\n        \"trialC-test\": {\r\n            // up to 6 frames\r\n            \"id\": 'balldrop-testC-procedure',\r\n            \"kind\": \"exp-frame-select\",\r\n            \"displayFullscreenOverride\": true,\r\n            \"commonFrameProperties\": {\r\n                \"baseDir\": STIMDIR,\r\n                \"displayFullscreenOverride\": true,\r\n                \"audioTypes\": [\"wav\"],\r\n                \"audio\": {\r\n                    \"loop\": false,\r\n                },\r\n                \"backgroundColor\": \"white\",\r\n                \"autoProceed\": true,\r\n                \"showPreviousButton\": false,\r\n                \"showProgressBar\": false,\r\n                \"showReplayButton\": true,\r\n                \"parentTextBlock\": {\r\n                    \"text\": \"\",\r\n                },\r\n            },\r\n            \"frameOptions\": [ // prompt, wrong, prompt, wrong, prompt, wrong\r\n                { // PUZZLE PROMPT 1\r\n                    \"id\": \"balldrop-testC-attempt1\",\r\n                    \"kind\": \"exp-lookit-images-audio\",\r\n                    \"audio\": \"balldrop_test_prompt\",\r\n                    \"baseDir\": STIMDIR,\r\n                    \"audioTypes\": [\"wav\"],\r\n                    \"backgroundColor\": \"white\",\r\n                    \"choiceRequired\": true,\r\n                    \"correctChoiceRequired\": false,\r\n                    \"canMakeChoiceBeforeAudioFinished\": false,\r\n                    \"parentTextBlock\": {\r\n                        \"text\": BALLDROP_PARENTTEXT,\r\n                    },\r\n                    \"images\": [{\r\n                        \"src\": \"balldrop_testC_puzzle.jpeg\",\r\n                        \"position\": \"fill\",\r\n                        \"top\": 0,\r\n                        \"nonChoiceOption\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"1\",\r\n                        \"src\": \"balldrop_chuteL.jpeg\",\r\n                        \"left\": 21.5,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,//\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"2\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 30.3,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"3\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 41.8,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"4\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 53.2,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"5\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 63.5,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"6\",\r\n                        \"src\": \"balldrop_chuteR.jpeg\",\r\n                        \"left\": 68.9,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    }\r\n                    ],\r\n                    // --- SELECT NEXT FRAME: Whatever happens, play the next frame\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {return (frameIndex + 1);}\"\r\n                },\r\n                { // FEEDBACK 1\r\n                    \"id\": \"balldrop-testC-feedback1\",\r\n                    \"kind\": \"exp-lookit-video\",\r\n                    \"audio\": { \"source\": \"balldrop_feedback1wrong\" },\r\n                    \"videoTypes\": [\"mp4\"],\r\n                    \"video\": {\r\n                        \"loop\": false,\r\n                        \"position\": \"fill\",\r\n                        'source': 'balldrop_testC_vid1'\r\n                    },\r\n                    \"requireVideoCount\": 1,\r\n                    \"requireAudioCount\": 1,\r\n                    \"frameOffsetAfterPause\": 0,\r\n                    // Determine which video and audio to play, depending on which chute was chosen\r\n                    // CUSTOMIZE thevideo and theaudio\r\n                    \"generateProperties\": \"function(expData, sequence, child, pastSessions, conditions){console.log(expData[sequence[sequence.length - 1]]); var thevideo = 'balldrop_testC_vid' + expData[sequence[sequence.length - 1]]['selectedImage']; var theaudio = 'balldrop_feedback1wrong'; if (expData[sequence[sequence.length - 1]]['correctImageSelected']) {theaudio = 'balldrop_feedback_good';}; return { 'video': { 'source': thevideo, 'position':'fill' }, 'audio': { 'source': theaudio }};}\",\r\n                    // Then choose next frame (if correct, go to transition frame. If wrong, go to next frame.)\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { return frameIndex+6; } else { return frameIndex+1; }}\"\r\n                    // \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { var transitionFrame = 0; for (var iFrame = 0; iFrame < frames.length; iFrame++) { if (frames[iFrame]['id'].indexOf('balldrop-alldone') != -1) { transitionFrame = iFrame; break;} }; console.log(transitionFrame); return transitionFrame; } else { return frameIndex+1; }}\"\r\n                },\r\n                { // PUZZLE PROMPT 2\r\n                    \"id\": \"balldrop-testC-attempt2\",\r\n                    \"kind\": \"exp-lookit-images-audio\",\r\n                    \"audio\": \"balldrop_test_prompt_short\",\r\n                    \"baseDir\": STIMDIR,\r\n                    \"audioTypes\": [\"wav\"],\r\n                    \"backgroundColor\": \"white\",\r\n                    \"choiceRequired\": true,\r\n                    \"correctChoiceRequired\": false,\r\n                    \"canMakeChoiceBeforeAudioFinished\": false,\r\n                    \"parentTextBlock\": {\r\n                        \"text\": BALLDROP_PARENTTEXT,\r\n                    },\r\n                    \"images\": [{\r\n                        \"src\": \"balldrop_testC_puzzle.jpeg\",\r\n                        \"position\": \"fill\",\r\n                        \"top\": 0,\r\n                        \"nonChoiceOption\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"1\",\r\n                        \"src\": \"balldrop_chuteL.jpeg\",\r\n                        \"left\": 21.5,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,//\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"2\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 30.3,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"3\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 41.8,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"4\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 53.2,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"5\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 63.5,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"6\",\r\n                        \"src\": \"balldrop_chuteR.jpeg\",\r\n                        \"left\": 68.9,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    }\r\n                    ],\r\n                    // --- SELECT NEXT FRAME: Whatever happens, play the next frame\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {return (frameIndex + 1);}\"\r\n                },\r\n                { // FEEDBACK 2\r\n                    \"id\": \"balldrop-testC-feedback2\",\r\n                    \"kind\": \"exp-lookit-video\",\r\n                    \"audio\": {\r\n                        \"loop\": false,\r\n                        \"source\": \"balldrop_feedback2wrong\",\r\n                    },\r\n                    \"videoTypes\": [\"mp4\"],\r\n                    \"requireAudioCount\": 1,\r\n                    \"video\": {\r\n                        \"loop\": false,\r\n                        \"position\": \"fill\",\r\n                        \"source\": \"balldrop_testC_vid1\",\r\n                    },\r\n                    \"requireVideoCount\": 1,\r\n                    \"frameOffsetAfterPause\": 0,\r\n                    // Determine which video and audio to play, depending on which chute was chosen\r\n                    // CUSTOMIZE thevideo and theaudio\r\n                    \"generateProperties\": \"function(expData, sequence, child, pastSessions, conditions){console.log(expData[sequence[sequence.length - 1]]); var thevideo = 'balldrop_testC_vid' + expData[sequence[sequence.length - 1]]['selectedImage']; var theaudio = 'balldrop_feedback2wrong'; if (expData[sequence[sequence.length - 1]]['correctImageSelected']) {theaudio = 'balldrop_feedback_good';}; return { 'video': { 'source': thevideo, 'position':'fill' }, 'audio': { 'source': theaudio }};}\",\r\n                    // Then choose next frame (if correct, go to transition frame. If wrong, go to next frame.)\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { return frameIndex+4; } else { return frameIndex+1; }}\"\r\n                    // \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { var transitionFrame = 0; for (var iFrame = 0; iFrame < frames.length; iFrame++) { if (frames[iFrame]['id'].indexOf('balldrop-alldone') != -1) { transitionFrame = iFrame; break;} }; console.log(transitionFrame); return transitionFrame; } else { return frameIndex+1; }}\"\r\n                },\r\n                { // PUZZLE PROMPT 3\r\n                    \"id\": \"balldrop-testC-attempt3\",\r\n                    \"kind\": \"exp-lookit-images-audio\",\r\n                    \"audio\": \"balldrop_test_prompt_short\",\r\n                    \"baseDir\": STIMDIR,\r\n                    \"audioTypes\": [\"wav\"],\r\n                    \"backgroundColor\": \"white\",\r\n                    \"choiceRequired\": true,\r\n                    \"correctChoiceRequired\": false,\r\n                    \"canMakeChoiceBeforeAudioFinished\": false,\r\n                    \"parentTextBlock\": {\r\n                        \"text\": BALLDROP_PARENTTEXT,\r\n                    },\r\n                    \"images\": [{\r\n                        \"src\": \"balldrop_testC_puzzle.jpeg\",\r\n                        \"position\": \"fill\",\r\n                        \"top\": 0,\r\n                        \"nonChoiceOption\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"1\",\r\n                        \"src\": \"balldrop_chuteL.jpeg\",\r\n                        \"left\": 21.5,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,//\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"2\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 30.3,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"3\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 41.8,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"4\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 53.2,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    },\r\n                    {\r\n                        \"id\": \"5\",\r\n                        \"src\": \"balldrop_chuteV.jpeg\",\r\n                        \"left\": 63.5,\r\n                        \"top\": 0,\r\n                        \"height\": 25.4,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": true,\r\n                    },\r\n                    {\r\n                        \"id\": \"6\",\r\n                        \"src\": \"balldrop_chuteR.jpeg\",\r\n                        \"left\": 68.9,\r\n                        \"top\": 25.4,\r\n                        \"height\": 30,\r\n                        \"feedbackAudio\": \"balldrop_tubeischosen\",\r\n                        \"correct\": false,\r\n                    }\r\n                    ],\r\n                    // --- SELECT NEXT FRAME: Whatever happens, play the next frame\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {return (frameIndex + 1);}\"\r\n                },\r\n                { // FEEDBACK 3\r\n                    \"id\": \"balldrop-testC-feedback3\",\r\n                    \"kind\": \"exp-lookit-video\",\r\n                    \"audio\": {\r\n                        \"loop\": false,\r\n                        \"source\": \"balldrop_feedback3wrong\", // FIXME ADD SILENCE SO AUDIO PLAYS AFTER ANIMATION ENDS\r\n                    },\r\n                    \"videoTypes\": [\"mp4\"],\r\n                    \"requireAudioCount\": 1,\r\n                    \"video\": {\r\n                        \"loop\": false,\r\n                        \"position\": \"fill\",\r\n                        \"source\": \"balldrop_testC_vid1\",\r\n                    },\r\n                    \"requireVideoCount\": 1,\r\n                    \"frameOffsetAfterPause\": 0,\r\n                    // Determine which video and audio to play, depending on which chute was chosen\r\n                    // CUSTOMIZE thevideo and theaudio\r\n                    \"generateProperties\": \"function(expData, sequence, child, pastSessions, conditions){console.log(expData[sequence[sequence.length - 1]]); var thevideo = 'balldrop_testC_vid' + expData[sequence[sequence.length - 1]]['selectedImage']; var theaudio = 'balldrop_feedback3wrong'; if (expData[sequence[sequence.length - 1]]['correctImageSelected']) {theaudio = 'balldrop_feedback_good';}; return { 'video': { 'source': thevideo, 'position':'fill' }, 'audio': { 'source': theaudio }};}\",\r\n                    // Then choose next frame (if correct, go to transition frame. If wrong, go to next frame.)\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { return frameIndex+2; } else { return frameIndex+1; }}\"\r\n                    // \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) {if (expData[sequence[sequence.length-1]]['correctImageSelected']) { var transitionFrame = 0; for (var iFrame = 0; iFrame < frames.length; iFrame++) { if (frames[iFrame]['id'].indexOf('balldrop-alldone') != -1) { transitionFrame = iFrame; break;} }; console.log(transitionFrame); return transitionFrame; } else { return frameIndex+1; }}\"\r\n                },\r\n                { // SOLUTION\r\n                    \"id\": \"balldrop-testC-solution\",\r\n                    \"kind\": \"exp-lookit-video\",\r\n                    \"video\": {\r\n                        \"loop\": false,\r\n                        \"source\": \"balldrop_testC_vid5\",\r\n                        \"position\": \"fill\",\r\n                    },\r\n                    \"videoTypes\": [\"mp4\"],\r\n                    \"requireVideoCount\": 1,\r\n                    \"frameOffsetAfterPause\": 0,\r\n                    \"selectNextFrame\": \"function(frames, frameIndex, frameData, expData, sequence, child, pastSessions) { return frameIndex+1; }\"\r\n                }\r\n            ]\r\n        },\r\n        'balldrop-predictA-puzzle': {\r\n            \"kind\": \"exp-lookit-images-audio\",\r\n            \"audio\": \"balldrop_predictA_prompt\",\r\n            \"images\": [{\r\n                \"id\": \"predictA_puzzle\",\r\n                \"src\": \"balldrop_predictA_puzzle.jpeg\",\r\n                \"position\": \"fill\",\r\n                \"top\": 0,\r\n                \"nonChoiceOption\": true\r\n            },\r\n            {\r\n                \"id\": \"cup1\",\r\n                \"src\": \"balldrop_predict_cup.jpeg\",\r\n                \"left\": 38,\r\n                \"top\": 41,\r\n                \"height\": 17,\r\n                \"feedbackAudio\": \"balldrop_ok\",\r\n                \"displayDelayMs\": 7500\r\n            },\r\n            {\r\n                \"id\": \"cup2\",\r\n                \"src\": \"balldrop_predict_cup.jpeg\",\r\n                \"left\": 53,\r\n                \"top\": 41,\r\n                \"height\": 17,\r\n                \"correct\": true,\r\n                \"feedbackAudio\": \"balldrop_ok\",\r\n                \"displayDelayMs\": 7500\r\n            },\r\n            {\r\n                \"id\": \"cup3\",\r\n                \"src\": \"balldrop_predict_cup.jpeg\",\r\n                \"left\": 38,\r\n                \"top\": 67,\r\n                \"height\": 17,\r\n                \"feedbackAudio\": \"balldrop_ok\",\r\n                \"displayDelayMs\": 7500\r\n            },\r\n            {\r\n                \"id\": \"cup4\",\r\n                \"src\": \"balldrop_predict_cup.jpeg\",\r\n                \"left\": 53,\r\n                \"top\": 67,\r\n                \"height\": 17,\r\n                \"feedbackAudio\": \"balldrop_ok\",\r\n                \"displayDelayMs\": 7500\r\n            }\r\n            ],\r\n            \"baseDir\": STIMDIR,\r\n            \"audioTypes\": [\"wav\"],\r\n            \"backgroundColor\": \"white\",\r\n            \"showPreviousButton\": false,\r\n            \"showProgressBar\": false,\r\n            \"showReplayButton\": true,\r\n            \"autoProceed\": false,\r\n            \"choiceRequired\": true,\r\n            \"correctChoiceRequired\": false,\r\n            \"canMakeChoiceBeforeAudioFinished\": false,\r\n            \"parentTextBlock\": {\r\n                \"text\": \"FOR PARENTS: \\nLet your child choose a cup. You can replay the prompt or help to control the mouse, but please do not choose for them. \\nClick NEXT after your child has responded.\",\r\n            }\r\n        },\r\n        'balldrop-predictB-puzzle': {\r\n            \"kind\": \"exp-lookit-images-audio\",\r\n            \"audio\": \"balldrop_predictB_prompt\",\r\n            \"images\": [{\r\n                \"id\": \"levelPredictB_puzzle\",\r\n                \"src\": \"balldrop_predictB_puzzle.jpeg\",\r\n                \"position\": \"fill\",\r\n                \"top\": 0,\r\n                \"nonChoiceOption\": true,\r\n            },\r\n            {\r\n                \"id\": \"cup1\",\r\n                \"src\": \"balldrop_predict_cup.jpeg\",\r\n                \"left\": 38,\r\n                \"top\": 41,\r\n                \"height\": 17,\r\n                \"feedbackAudio\": \"balldrop_ok\",\r\n                \"displayDelayMs\": 7500\r\n            },\r\n            {\r\n                \"id\": \"cup2\",\r\n                \"src\": \"balldrop_predict_cup.jpeg\",\r\n                \"left\": 53,\r\n                \"top\": 41,\r\n                \"height\": 17,\r\n                \"correct\": true,\r\n                \"feedbackAudio\": \"balldrop_ok\",\r\n                \"displayDelayMs\": 7500\r\n            },\r\n            {\r\n                \"id\": \"cup3\",\r\n                \"src\": \"balldrop_predict_cup.jpeg\",\r\n                \"left\": 38,\r\n                \"top\": 67,\r\n                \"height\": 17,\r\n                \"feedbackAudio\": \"balldrop_ok\",\r\n                \"displayDelayMs\": 7500\r\n            },\r\n            {\r\n                \"id\": \"cup4\",\r\n                \"src\": \"balldrop_predict_cup.jpeg\",\r\n                \"left\": 53,\r\n                \"top\": 67,\r\n                \"height\": 17,\r\n                \"feedbackAudio\": \"balldrop_ok\",\r\n                \"displayDelayMs\": 7500\r\n            }\r\n            ],\r\n            \"baseDir\": STIMDIR,\r\n            \"audioTypes\": [\"wav\"],\r\n            \"backgroundColor\": \"white\",\r\n            \"showPreviousButton\": false,\r\n            \"showProgressBar\": false,\r\n            \"showReplayButton\": true,\r\n            \"autoProceed\": false,\r\n            \"choiceRequired\": true,\r\n            \"correctChoiceRequired\": false,\r\n            \"canMakeChoiceBeforeAudioFinished\": false,\r\n            \"parentTextBlock\": {\r\n                \"text\": \"FOR PARENTS: \\nLet your child choose a cup. You can replay the prompt or help to control the mouse, but please do not choose for them. \\nClick NEXT after your child has responded.\",\r\n            }\r\n        },\r\n        'balldrop-inferA-puzzle': {\r\n            \"kind\": \"exp-lookit-images-audio\",\r\n            \"audio\": \"balldrop_inferA_prompt\",\r\n            \"images\": [{\r\n                \"id\": \"inferA_puzzle\",\r\n                \"src\": \"balldrop_inferA_puzzle.jpeg\",\r\n                \"position\": \"fill\",\r\n                \"top\": 0,\r\n                \"nonChoiceOption\": true,\r\n            },\r\n            {\r\n                \"id\": \"cup1\",\r\n                \"src\": \"balldrop_inferA_filledcup.jpeg\",\r\n                \"left\": 38,\r\n                \"top\": 41,\r\n                \"height\": 17,\r\n                \"nonChoiceOption\": true,\r\n            },\r\n            {\r\n                \"id\": \"chute1\",\r\n                \"src\": \"balldrop_chuteL.jpeg\",\r\n                \"left\": 21.7,\r\n                \"top\": 26,\r\n                \"height\": 30,//\r\n                \"displayDelayMs\": 15400\r\n            },\r\n            {\r\n                \"id\": \"chute2\",\r\n                \"src\": \"balldrop_chuteV.jpeg\",\r\n                \"left\": 39.9,\r\n                \"top\": 0,\r\n                \"height\": 25.4,\r\n                \"correct\": true,\r\n                \"displayDelayMs\": 16400\r\n            },\r\n            {\r\n                \"id\": \"chute3\",\r\n                \"src\": \"balldrop_chuteV.jpeg\",\r\n                \"left\": 55.2,\r\n                \"top\": 0,\r\n                \"height\": 25.4,\r\n                \"displayDelayMs\": 17600\r\n            },\r\n            {\r\n                \"id\": \"chute4\",\r\n                \"src\": \"balldrop_chuteR.jpeg\",\r\n                \"left\": 68.9,\r\n                \"top\": 26,\r\n                \"height\": 30,//\r\n                \"displayDelayMs\": 18900\r\n            }\r\n            ], \"highlights\": [\r\n                {\r\n                    \"range\": [\r\n                        3.8,\r\n                        4.4\r\n                    ],\r\n                    \"imageId\": \"cup1\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        5.8,\r\n                        6.3],\r\n                    \"imageId\": \"cup1\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        10.2,\r\n                        10.9],\r\n                    \"imageId\": \"cup1\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        15.4,\r\n                        15.9],\r\n                    \"imageId\": \"chute1\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        16.4,\r\n                        16.9],\r\n                    \"imageId\": \"chute2\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        17.6,\r\n                        18.1],\r\n                    \"imageId\": \"chute3\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        18.9,\r\n                        19.4],\r\n                    \"imageId\": \"chute4\"\r\n                },\r\n            ],\r\n            \"baseDir\": STIMDIR,\r\n            \"audioTypes\": [\"wav\"],\r\n            \"backgroundColor\": \"white\",\r\n            \"showPreviousButton\": false,\r\n            \"showProgressBar\": false,\r\n            \"showReplayButton\": true,\r\n            \"autoProceed\": false,\r\n            \"choiceRequired\": true,\r\n            \"correctChoiceRequired\": false,\r\n            \"canMakeChoiceBeforeAudioFinished\": false,\r\n            \"parentTextBlock\": {\r\n                \"text\": \"FOR PARENTS: \\n Let your child choose a chute. You can replay the prompt or help to control the mouse, but please do not choose for them. \\nClick NEXT after your child has responded.\",\r\n            }\r\n        },\r\n        'balldrop-inferB-puzzle': {\r\n            \"kind\": \"exp-lookit-images-audio\",\r\n            \"audio\": \"balldrop_inferB_prompt\",\r\n            \"images\": [{\r\n                \"id\": \"inferB_puzzle\",\r\n                \"src\": \"balldrop_inferB_puzzle.jpeg\",\r\n                \"position\": \"fill\",\r\n                \"top\": 0,\r\n                \"nonChoiceOption\": true,\r\n            },\r\n            {\r\n                \"id\": \"cup4\",\r\n                \"src\": \"balldrop_inferB_filledcup.jpeg\",\r\n                \"left\": 53,\r\n                \"top\": 67,\r\n                \"height\": 17,\r\n                \"nonChoiceOption\": true,\r\n            },\r\n            {\r\n                \"id\": \"chute1\",\r\n                \"src\": \"balldrop_chuteL.jpeg\",\r\n                \"left\": 21.5,\r\n                \"top\": 26,\r\n                \"height\": 30,//\r\n                \"displayDelayMs\": 11900\r\n            },\r\n            {\r\n                \"id\": \"chute2\",\r\n                \"src\": \"balldrop_chuteV.jpeg\",\r\n                \"left\": 39.9,\r\n                \"top\": 0,\r\n                \"height\": 25.4,\r\n                \"displayDelayMs\": 13000\r\n            },\r\n            {\r\n                \"id\": \"chute3\",\r\n                \"src\": \"balldrop_chuteV.jpeg\",\r\n                \"left\": 55.2,\r\n                \"top\": 0,\r\n                \"height\": 25.4,\r\n                \"displayDelayMs\": 14100\r\n            },\r\n            {\r\n                \"id\": \"chute4\",\r\n                \"src\": \"balldrop_chuteR.jpeg\",\r\n                \"left\": 68.9,\r\n                \"top\": 26,\r\n                \"height\": 30,//\r\n                \"correct\": true,\r\n                \"displayDelayMs\": 15300\r\n            }\r\n            ],\r\n            \"highlights\": [\r\n                {\r\n                    \"range\": [\r\n                        6.9,\r\n                        7.4\r\n                    ],\r\n                    \"imageId\": \"cup4\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        9.4,\r\n                        10.1],\r\n                    \"imageId\": \"cup4\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        11.9,\r\n                        12.4],\r\n                    \"imageId\": \"chute1\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        13,\r\n                        13.5],\r\n                    \"imageId\": \"chute2\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        14.1,\r\n                        14.6],\r\n                    \"imageId\": \"chute3\"\r\n                },\r\n                {\r\n                    \"range\": [\r\n                        15.3,\r\n                        15.8],\r\n                    \"imageId\": \"chute4\"\r\n                },\r\n            ], \"baseDir\": STIMDIR,\r\n            \"audioTypes\": [\"wav\"],\r\n            \"backgroundColor\": \"white\",\r\n            \"showPreviousButton\": false,\r\n            \"showProgressBar\": false,\r\n            \"showReplayButton\": true,\r\n            \"autoProceed\": false,\r\n            \"choiceRequired\": true,\r\n            \"correctChoiceRequired\": false,\r\n            \"canMakeChoiceBeforeAudioFinished\": false,\r\n            \"parentTextBlock\": {\r\n                \"text\": \"FOR PARENTS: \\nLet your child choose a chute. You can replay the prompt or help to control the mouse, but please do not choose for them. \\nClick NEXT after your child has responded.\",\r\n            }\r\n        },\r\n        \"exit-survey\": {\r\n            \"kind\": \"exp-lookit-exit-survey\",\r\n            \"debriefing\": {\r\n                \"title\": \"Thank you for participating!\",\r\n                \"blocks\": [\r\n                    {\r\n                        \"title\": \"\",\r\n                        \"text\": \"This research wouldn't be possible without awesome parents like you.\"\r\n                    },\r\n                    {\r\n                        \"title\": \"Some Background Information:\",\r\n                        \"text\": \"The ability to generate new ideas is an important part of cognitive development. For example, reasoning about different explanations can help children understand and navigate different situations that occur in everyday life, such as how the physical world works, or why somebody acted in a particular way. Reasoning about new hypotheses and explanations is also an important part of scientific thinking. However, sometimes we might get 'stuck' when thinking about new situations, because our previous knowledge or assumptions get in the way. In this research, we look at how children might learn to get 'unstuck' when trying to solve different riddles. \\n\\n We used a type of riddles known as 'stumpers', which have simple but elusive solutions. When initially hearing these riddles, people often feel 'stumped', and no good ideas come to mind. However, thinking about the riddle from a different perspective (such as imagining a night time scene instead of day time) often makes the solution very obvious. In this study, we ask if exposing children to many similar riddles helps them to think more creatively on later riddles. By studying how children reason about these riddles, and how children learn to think more creatively, we can better understand the development of creative problem-solving. We will also examine how this ability relates to other aspects of development such as language, spatial reasoning, or reflection.\"\r\n                    },\r\n                    {\r\n                        \"title\": \"Additional Resources:\",\r\n                        \"text\": \"Below we list a few resources to learn more about how children think about riddles, explanations, as well as some links to learn more about the development of creativity: <ul><li>This <a href='https://www.psychologicalscience.org/observer/children-creativity-intelligence' target='_blank' rel='noopener'>column</a>, from the Association for Psychological Science, discusses young children's creativity, and how that reveals the limits of current artificial intelligence systems. </li><li>Learn more about research on riddles and stumpers in <a href='https://insights.som.yale.edu/insights/what-riddles-teach-us-about-the-human-mind' target='_blank' rel='noopener'>this article</a> from the Yale School of Management</li> <li>The book <a href='https://thepuzzlerbook.com/ target='_blank' rel='noopener''>The Puzzler</a> by A.J. Jacobs covers the history of puzzles, and research from psychology and neuroscience research on why humans enjoy puzzles.</li></ul>\"\r\n                    },\r\n                    {\r\n                        \"title\": \"Compensation:\",\r\n                        \"text\": \"To thank you for your participation, we'll be emailing you a $5 USD Amazon gift card - this should arrive in your inbox within the next week after we confirm your consent video and check that your child is in the age range for this study (If you don't hear from us by then, feel free to reach out!). If you participate again with another child in the age range, you'll receive one gift card per child.\"\r\n                    },\r\n                    {\r\n                        \"title\": \"Questions or Concerns:\",\r\n                        \"text\": \"Please do not hesitate to contact Junyi Chu at junyichu@fas.harvard.edu\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n    };\r\n\r\n    // Start off the frame sequence with config/consent/introduction frames\r\n    frame_sequence = ['welcome', 'video-config', 'video-consent', 'parent-instructions-stumpers', 'Storybook-Module2A-Intro', 'start-recording-with-video'];\r\n\r\n    // Now define parameters for test trials\r\n    var set_container = [\"container_bucket\", \"container_cup\", \"container_potato\"];\r\n    var set_gender = [\"gender_basketball\", \"gender_firefighter\", \"gender_teacher\"];\r\n    var set_viewing = [\"viewing_bedroom\", \"viewing_cow\", \"viewing_keys\"];\r\n\r\n    // Now implement counterbalancing logic and define ordered trial sequence\r\n    var shuffled_container = shuffle(set_container);\r\n    var shuffled_gender = shuffle(set_gender);\r\n    var shuffled_viewing = shuffle(set_viewing);\r\n    var nested_trial_list = shuffle([shuffled_container, shuffled_gender, shuffled_viewing]);\r\n    var ordered_trials = nested_trial_list.flat();\r\n\r\n    // Specify wait durations (can't click next until question is played)\r\n    var question_durations = {\r\n        \"container_bucket\": 15, \"container_cup\": 14, \"container_potato\": 14,\r\n        \"gender_basketball\": 12, \"gender_firefighter\": 13, \"gender_teacher\": 17,\r\n        \"viewing_bedroom\": 24, \"viewing_cow\": 25, \"viewing_keys\": 24\r\n    };\r\n    var answer_durations = {\r\n        \"container_bucket\": 5000, \"container_cup\": 9000, \"container_potato\": 8000,\r\n        \"gender_basketball\": 7000, \"gender_firefighter\": 7000, \"gender_teacher\": 6000,\r\n        \"viewing_bedroom\": 10000, \"viewing_cow\": 7000, \"viewing_keys\": 5000\r\n    };\r\n\r\n\r\n    // Create list of 9 trials\r\n    for (iTrial = 0; iTrial < 9; iTrial++) {\r\n        // First, extract frame parameters from the trial pairing definition\r\n        var label = ordered_trials[iTrial];\r\n        var theanswer = label + '_answer';\r\n        var thequestion = label + '_question';\r\n        var theintro = \"trialintro_\" + iTrial;\r\n        var questionduration = question_durations[label];\r\n        var answerduration = answer_durations[label];\r\n\r\n        // Now use parameters to create this trial frame\r\n        var thisIntro = {\r\n            \"kind\": \"exp-lookit-video\",\r\n            \"video\": {\r\n                \"loop\": false,\r\n                \"position\": \"fill\",\r\n                \"controls\": false,\r\n                \"source\": theintro\r\n            },\r\n            \"backgroundColor\": \"white\",\r\n            \"autoProceed\": false, // must click next\r\n            \"requireVideoCount\": 1,\r\n            \"frameOffsetAfterPause\": 0, // restart frame if pause-unpaused\r\n            \"baseDir\": \"https://cocodev.opalstacked.com/experiments/junyi/kid-stumpers-stimuli/\",\r\n            \"videoTypes\": [\"mp4\"],\r\n            \"parentTextBlock\": {\r\n                \"title\": 'For parents:',\r\n                \"text\": \"Click next to hear a new question.\\nIf you need to take a break, now is a good time to do so.\",\r\n            }\r\n        };\r\n\r\n        var thisHello = {\r\n            \"kind\": \"exp-lookit-images-audio\",\r\n            \"audio\": iTrial + '-hello',\r\n            \"images\": [\r\n                {\r\n                    \"id\": \"question_asker\",\r\n                    \"src\": \"character\" + iTrial + \".jpeg\",\r\n                    \"height\": 70,\r\n                    \"left\": 15,\r\n                    \"top\": 0,\r\n                    \"nonChoiceOption\": true,\r\n                }\r\n            ],\r\n            \"backgroundColor\": \"white\",\r\n            \"autoProceed\": true, // must click next\r\n            \"showPreviousButton\": false,\r\n            \"showProgressBar\": false,\r\n            \"baseDir\": \"https://cocodev.opalstacked.com/experiments/junyi/kid-stumpers-stimuli/\",\r\n            \"audioTypes\": [\"wav\"],\r\n            \"parentTextBlock\": {\r\n                // \"title\": 'For parents:',\r\n                \"text\": \"FOR PARENTS:\\nClick next AFTER your child has responded. You can encourage your child to guess, or to tell you more. But if they keep saying they don't know, you can just click to move on.\",\r\n                'font-size': 'small'\r\n            }\r\n        };\r\n\r\n        var thisTrial = {\r\n            \"kind\": \"exp-lookit-images-audio\",\r\n            \"audio\": thequestion,\r\n            \"images\": [\r\n                {\r\n                    \"id\": \"question_asker\",\r\n                    \"src\": \"character\" + iTrial + \".jpeg\",\r\n                    \"height\": 70,\r\n                    \"left\": 15,\r\n                    \"top\": 0,\r\n                    \"nonChoiceOption\": true,\r\n                }\r\n            ],\r\n            \"backgroundColor\": \"white\",\r\n            \"autoProceed\": false, // must click next\r\n            \"durationSeconds\": questionduration, // cannot click next until at least 30 seconds have passed\r\n            \"showPreviousButton\": false,\r\n            \"showReplayButton\": true,\r\n            \"showProgressBar\": false, // stops in 30 s; so parents know if the whole question has been asked\r\n            \"baseDir\": \"https://cocodev.opalstacked.com/experiments/junyi/kid-stumpers-stimuli/\",\r\n            \"audioTypes\": [\"wav\"],\r\n            \"parentTextBlock\": {\r\n                // \"title\": 'For parents:',\r\n                \"text\": \"FOR PARENTS:\\nClick next AFTER your child has responded. You can encourage your child to guess, or to tell you more. But if they keep saying they don't know, you can just click to move on.\",\r\n                'font-size': 'small'\r\n            }\r\n        };\r\n\r\n        var thisFeedback = {\r\n            \"kind\": \"exp-lookit-images-audio\",\r\n            \"audio\": theanswer,\r\n            \"images\": [\r\n                {\r\n                    \"id\": \"character\",\r\n                    \"src\": \"character\" + iTrial + \".jpeg\",\r\n                    \"height\": 70,\r\n                    \"left\": 15,\r\n                    \"top\": 0,\r\n                    \"nonChoiceOption\": true,\r\n                },\r\n                {\r\n                    \"id\": \"similar\",\r\n                    \"src\": \"answered_similar.png\",\r\n                    \"left\": 0,\r\n                    \"top\": 70,\r\n                    \"width\": 25,\r\n                    \"displayDelayMs\": answerduration,\r\n                },\r\n                {\r\n                    \"id\": \"different\",\r\n                    \"src\": \"answered_different.png\",\r\n                    \"left\": 37,\r\n                    \"top\": 70,\r\n                    \"width\": 25,\r\n                    \"displayDelayMs\": answerduration,\r\n                },\r\n                {\r\n                    \"id\": \"no_answer\",\r\n                    \"src\": \"answered_none.png\",\r\n                    \"left\": 75,\r\n                    \"top\": 70,\r\n                    \"width\": 25,\r\n                    \"displayDelayMs\": answerduration,\r\n                }\r\n            ],\r\n            \"backgroundColor\": \"white\",\r\n            \"autoProceed\": false, // get parents to confirm the choice\r\n            \"showPreviousButton\": false,\r\n            \"showReplayButton\": true,\r\n            \"showProgressBar\": false,\r\n            \"choiceRequired\": true,\r\n            \"canMakeChoiceBeforeAudioFinished\": false,\r\n            \"baseDir\": \"https://cocodev.opalstacked.com/experiments/junyi/kid-stumpers-stimuli/\",\r\n            \"audioTypes\": [\"wav\"],\r\n            \"parentTextBlock\": {\r\n                \"title\": \"For parents\",\r\n                \"text\": \"Did your child say something similar to what the character said? Please choose an option, using your best judgment.\",\r\n            }\r\n        };\r\n\r\n        // Store this trial in frame definitions and frame sequence\r\n        introId = 'trial-' + (iTrial) + '-intro';\r\n        helloId = 'trial-' + (iTrial) + '-hello';\r\n        trialId = 'trial-' + (iTrial) + '-question';\r\n        feedbackId = 'trial-' + (iTrial) + '-feedback';\r\n        frames[introId] = thisIntro;\r\n        frames[helloId] = thisHello;\r\n        frames[trialId] = thisTrial;\r\n        frames[feedbackId] = thisFeedback;\r\n        frame_sequence.push(introId, helloId, trialId, feedbackId);\r\n        // // After 6 trials\r\n        // if (iTrial == 5) {\r\n        //     frame_sequence.push('webcam-display-break');\r\n        // }\r\n\r\n    }\r\n\r\n    // ---- BALL DROP GAME ----\r\n    frame_sequence.push('stop-recording-with-video', 'game-transition', 'start-recording-with-video');\r\n\r\n    // ---- Tutorial ---- \r\n    frame_sequence.push('balldrop-tutorial-intro', 'balldrop-tutorial1-puzzle', 'balldrop-tutorial1-outcome', 'balldrop-tutorial2-puzzle', 'balldrop-tutorial2-outcome');\r\n\r\n    // ---- Test levels ----\r\n    var shuffled_trials = shuffle([\"trialA-test\", \"trialB-test\", \"trialC-test\"]);\r\n    frame_sequence.push(shuffled_trials[0]);    // frame_sequence.push('trialA-test');\r\n    frame_sequence.push('balldrop-trial1-done');\r\n    frame_sequence.push(shuffled_trials[1]);    // frame_sequence.push('trialB-test');\r\n    frame_sequence.push('balldrop-trial2-done');\r\n    frame_sequence.push(shuffled_trials[2]);    // frame_sequence.push('trialC-test');\r\n    frame_sequence.push('balldrop-trial3-done');\r\n\r\n    // ---- Check trials ----\r\n    frame_sequence.push('balldrop-predictA-puzzle', 'balldrop-predictB-puzzle', 'balldrop-inferA-puzzle', 'balldrop-inferB-puzzle');\r\n\r\n    // ---- END ----\r\n    frame_sequence.push('stop-recording-with-video', 'balldrop-alldone', 'Storybook-Module2A-Outro');\r\n\r\n    frame_sequence.push('exit-survey');\r\n\r\n    // Return a study protocol with \"frames\" and \"sequence\" fields just like when\r\n    // defining the protocol in JSON only\r\n    return {\r\n        frames: frames,\r\n        sequence: frame_sequence\r\n    };\r\n}"